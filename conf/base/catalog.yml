# =========================
# RAW (entradas CSV) — nombres SINGULARES
# =========================
customer_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/customer.csv
  load_args:
    parse_dates: [date_of_birth, signup_date]

product_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/product.csv

purchase_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/purchase.csv
  load_args:
    parse_dates: [purchase_date]

# =========================
# INTERMEDIATE / VALIDATED (Parquet)
# =========================
customer_validated:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/customer_validated.parquet

product_validated:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/product_validated.parquet

purchase_validated:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/purchase_validated.parquet

# =========================
# ENRICHED / JOIN
# (por compatibilidad, mantengo el nombre previo; si quieres, luego lo singularizamos)
# =========================
transactions_enriched:
  type: pandas.ParquetDataset
  filepath: data/03_primary/transactions_enriched.parquet

# =========================
# FEATURE LAYER (Fase 3)
# =========================
customers_prepared:   # si quieres 100% singular: cámbialo a "customer_prepared"
  type: pandas.ParquetDataset
  filepath: data/03_primary/customers_prepared.parquet

rfm_features:
  type: pandas.ParquetDataset
  filepath: data/04_feature/rfm_features.parquet

category_prefs:
  type: pandas.ParquetDataset
  filepath: data/04_feature/category_prefs.parquet

customer_features:
  type: pandas.ParquetDataset
  filepath: data/04_feature/customer_features.parquet


# === RAW (01_raw) ===
raw_main:
  type: pandas.CSVDataset
  filepath: data/01_raw/purchase.csv
  load_args:
    sep: ","
    encoding: "utf-8"
    parse_dates: [purchase_date]

raw_reference:
  type: pandas.CSVDataset
  filepath: data/01_raw/product.csv
  load_args:
    sep: ","
    encoding: "utf-8"

raw_supplementary:
  type: pandas.CSVDataset
  filepath: data/01_raw/customer.csv
  load_args:
    sep: ","
    encoding: "utf-8"
    parse_dates: [date_of_birth, signup_date]

# === INTERMEDIATE / PRIMARY / FEATURE ===
intermediate_merged:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/merged.parquet

intermediate_selected:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/selected.parquet

primary_clean:
  type: pandas.ParquetDataset
  filepath: data/03_primary/clean.parquet

feature_features:
  type: pandas.ParquetDataset
  filepath: data/04_feature/features.parquet

preprocessor:
  type: pickle.PickleDataset
  filepath: data/04_feature/preprocessor.pkl
  backend: pickle

# === MODEL INPUT (05_model_input) ===
model_input_X_train:
  type: pandas.ParquetDataset
  filepath: data/05_model_input/X_train.parquet

model_input_X_test:
  type: pandas.ParquetDataset
  filepath: data/05_model_input/X_test.parquet

model_input_y_train:
  type: pandas.ParquetDataset
  filepath: data/05_model_input/y_train.parquet

model_input_y_test:
  type: pandas.ParquetDataset
  filepath: data/05_model_input/y_test.parquet
